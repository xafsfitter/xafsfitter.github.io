"use strict";(globalThis.webpackChunkxafsfitter_docs=globalThis.webpackChunkxafsfitter_docs||[]).push([[761],{3265(e,r,n){n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"configuration/parameters","title":"Parameters","description":"Every path parameter in XAFS Fitter operates in one of two modes: Free or Computed. Global parameters (S\u2080\xb2 and E\u2080) always operate as Free parameters.","source":"@site/docs/configuration/parameters.md","sourceDirName":"configuration","slug":"/configuration/parameters","permalink":"/docs/configuration/parameters","draft":false,"unlisted":false,"editUrl":"https://github.com/xafsfitter/xafsfitter.github.io/edit/main/docs/configuration/parameters.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"parameters","title":"Parameters","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Configuration Format","permalink":"/docs/configuration/config-format"},"next":{"title":"Constraints","permalink":"/docs/configuration/constraints"}}');var a=n(4848),s=n(8453);const i={id:"parameters",title:"Parameters",sidebar_position:2},d="Parameters",o={},l=[{value:"Free Parameters",id:"free-parameters",level:2},{value:"Fixed Parameters",id:"fixed-parameters",level:3},{value:"Computed Parameters",id:"computed-parameters",level:2},{value:"Penalty Functions",id:"penalty-functions",level:2},{value:"Variable Naming",id:"variable-naming",level:2},{value:"Duplicate Paths",id:"duplicate-paths",level:2}];function c(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"parameters",children:"Parameters"})}),"\n",(0,a.jsxs)(r.p,{children:["Every path parameter in XAFS Fitter operates in one of two modes: ",(0,a.jsx)(r.strong,{children:"Free"})," or ",(0,a.jsx)(r.strong,{children:"Computed"}),". Global parameters (S\u2080\xb2 and E\u2080) always operate as Free parameters."]}),"\n",(0,a.jsx)(r.h2,{id:"free-parameters",children:"Free Parameters"}),"\n",(0,a.jsx)(r.p,{children:"A free parameter is optimized directly by the fitting algorithm."}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-json",children:'{\r\n  "mode": "free",\r\n  "vary": true,\r\n  "value": 0.003,\r\n  "bounds": [0.0, 0.02],\r\n  "var_name": "sig2_uo"\r\n}\n'})}),"\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Field"}),(0,a.jsx)(r.th,{children:"Description"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"vary"})}),(0,a.jsxs)(r.td,{children:[(0,a.jsx)(r.code,{children:"true"})," to optimize; ",(0,a.jsx)(r.code,{children:"false"})," to hold fixed at ",(0,a.jsx)(r.code,{children:"value"})]})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"value"})}),(0,a.jsxs)(r.td,{children:["Initial value (and fixed value if ",(0,a.jsx)(r.code,{children:"vary: false"}),")"]})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"bounds"})}),(0,a.jsxs)(r.td,{children:[(0,a.jsx)(r.code,{children:"[min, max]"})," allowed range for the optimizer"]})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"var_name"})}),(0,a.jsx)(r.td,{children:"Optional name for referencing in Computed expressions"})]})]})]}),"\n",(0,a.jsx)(r.h3,{id:"fixed-parameters",children:"Fixed Parameters"}),"\n",(0,a.jsxs)(r.p,{children:["Setting ",(0,a.jsx)(r.code,{children:"vary: false"})," holds the parameter at its ",(0,a.jsx)(r.code,{children:"value"})," and excludes it from the optimization. This is useful when you know a parameter from prior knowledge or want to test the effect of fixing it."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-json",children:'{\r\n  "mode": "free",\r\n  "vary": false,\r\n  "value": 8.0\r\n}\n'})}),"\n",(0,a.jsx)(r.h2,{id:"computed-parameters",children:"Computed Parameters"}),"\n",(0,a.jsxs)(r.p,{children:["A computed parameter derives its value from a mathematical expression referencing other parameters by ",(0,a.jsx)(r.code,{children:"var_name"}),"."]}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-json",children:'{\r\n  "mode": "computed",\r\n  "expression": "8 - cn_1"\r\n}\n'})}),"\n",(0,a.jsxs)(r.p,{children:["The expression is evaluated using standard Python math operators and the ",(0,a.jsx)(r.code,{children:"math"})," module. Any ",(0,a.jsx)(r.code,{children:"var_name"})," defined on any free parameter in the configuration is available as a variable."]}),"\n",(0,a.jsxs)(r.p,{children:["See ",(0,a.jsx)(r.a,{href:"./constraints",children:"Constraints"})," for examples."]}),"\n",(0,a.jsx)(r.h2,{id:"penalty-functions",children:"Penalty Functions"}),"\n",(0,a.jsx)(r.p,{children:"Penalty functions provide soft constraints \u2014 they allow a parameter to go outside preferred bounds but add a cost to the R-factor when it does."}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-json",children:'{\r\n  "mode": "free",\r\n  "vary": true,\r\n  "value": 0.003,\r\n  "bounds": [0.0, 0.02],\r\n  "penalty": true,\r\n  "penalty_weight": 10.0,\r\n  "penalty_steepness": 5.0\r\n}\n'})}),"\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Field"}),(0,a.jsx)(r.th,{children:"Description"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"penalty"})}),(0,a.jsxs)(r.td,{children:[(0,a.jsx)(r.code,{children:"true"})," to enable penalty function"]})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"penalty_weight"})}),(0,a.jsx)(r.td,{children:"Multiplier for the penalty term added to R-factor"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"penalty_steepness"})}),(0,a.jsx)(r.td,{children:"Controls how sharply the penalty rises near bounds"})]})]})]}),"\n",(0,a.jsx)(r.p,{children:"Penalty functions are an alternative to hard bounds when you want the optimizer to explore beyond the bounds in extreme cases without being absolutely excluded."}),"\n",(0,a.jsx)(r.h2,{id:"variable-naming",children:"Variable Naming"}),"\n",(0,a.jsxs)(r.p,{children:["The ",(0,a.jsx)(r.code,{children:"var_name"})," field gives a parameter a symbolic name that can be referenced in Computed expressions. Names must be:"]}),"\n",(0,a.jsxs)(r.ul,{children:["\n",(0,a.jsx)(r.li,{children:"Unique across all parameters in the configuration"}),"\n",(0,a.jsx)(r.li,{children:"Valid Python identifiers (letters, digits, underscores; cannot start with a digit)"}),"\n"]}),"\n",(0,a.jsxs)(r.p,{children:["Convention: use descriptive names like ",(0,a.jsx)(r.code,{children:"cn_1"}),", ",(0,a.jsx)(r.code,{children:"dr_uo"}),", ",(0,a.jsx)(r.code,{children:"sig2_uu"})," to make expressions readable."]}),"\n",(0,a.jsx)(r.h2,{id:"duplicate-paths",children:"Duplicate Paths"}),"\n",(0,a.jsxs)(r.p,{children:["You can include the same ",(0,a.jsx)(r.code,{children:".dat"})," file more than once with different parameters. This is useful when the same nominal path appears in two inequivalent sites (e.g. two inequivalent oxygen shells at nominally the same FEFF distance). Give each instance a different ",(0,a.jsx)(r.code,{children:"label"})," to distinguish them in the output."]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453(e,r,n){n.d(r,{R:()=>i,x:()=>d});var t=n(6540);const a={},s=t.createContext(a);function i(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);