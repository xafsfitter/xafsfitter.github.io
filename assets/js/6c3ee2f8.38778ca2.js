"use strict";(globalThis.webpackChunkxafsfitter_docs=globalThis.webpackChunkxafsfitter_docs||[]).push([[605],{11(e,n,r){r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"cli/uo2-cli-tutorial","title":"UO\u2082 Tutorial (CLI)","description":"This tutorial demonstrates a complete UO\u2082 fit entirely from the command line.","source":"@site/docs/cli/uo2-cli-tutorial.md","sourceDirName":"cli","slug":"/cli/uo2-cli-tutorial","permalink":"/docs/cli/uo2-cli-tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/xafsfitter/xafsfitter.github.io/edit/main/docs/cli/uo2-cli-tutorial.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"uo2-cli-tutorial","title":"UO\u2082 Tutorial (CLI)","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Parallel Runs","permalink":"/docs/cli/parallel-runs"},"next":{"title":"Configuration Reference","permalink":"/docs/category/configuration-reference"}}');var i=r(4848),a=r(8453);const s={id:"uo2-cli-tutorial",title:"UO\u2082 Tutorial (CLI)",sidebar_position:4},o="UO\u2082 Tutorial \u2014 CLI",l={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Generate FEFF Paths",id:"step-1-generate-feff-paths",level:2},{value:"Step 2: Edit the Configuration",id:"step-2-edit-the-configuration",level:2},{value:"Step 3: Run LM Fit",id:"step-3-run-lm-fit",level:2},{value:"Step 4: Warm-Start GA",id:"step-4-warm-start-ga",level:2},{value:"Step 5: Parallel GA Ensemble",id:"step-5-parallel-ga-ensemble",level:2},{value:"Step 6: Inspect Results",id:"step-6-inspect-results",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"uo-tutorial--cli",children:"UO\u2082 Tutorial \u2014 CLI"})}),"\n",(0,i.jsx)(n.p,{children:"This tutorial demonstrates a complete UO\u2082 fit entirely from the command line."}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"XAFS Fitter installed, virtual environment activated"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"UO2.cif"})," and ",(0,i.jsx)(n.code,{children:"UO2_data.prj"})," in the current directory"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"step-1-generate-feff-paths",children:"Step 1: Generate FEFF Paths"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python -m xafs_cli feff \\\r\n  --cif UO2.cif \\\r\n  -a U \\\r\n  -e L3 \\\r\n  --cluster-size 7.0 \\\r\n  --prj athena.prj \\\r\n  --group LN300_merge_calib\n"})}),"\n",(0,i.jsx)(n.p,{children:"Sample output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Total paths: 47\r\n\r\nGenerated configuration: UO2_U_L3_feff_config.json\r\n\r\nNext steps:\r\n  1. Edit UO2_U_L3_feff_config.json to adjust paths and parameters\r\n  2. Run: python -m xafs_cli run --config UO2_U_L3_feff_config.json\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"update.bat product selection menu",src:r(6728).A+"",width:"1188",height:"621"})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-edit-the-configuration",children:"Step 2: Edit the Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Open ",(0,i.jsx)(n.code,{children:"UO2_U_L3_feff_config.json"})," and:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Set your global parameters"}),"\n",(0,i.jsx)(n.li,{children:"Edit your paths and bounds"}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["There are ",(0,i.jsx)(n.strong,{children:"10 example paths"})," in ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"UO2_U_L3_feff_config.json"})})," to demonstrate how it's set up, feel free to remove or add as many as you would like as they most likely do not match your sample."]})}),"\n",(0,i.jsx)(n.h2,{id:"step-3-run-lm-fit",children:"Step 3: Run LM Fit"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python -m xafs_cli run \\\r\n  --config UO2_U_L3_feff_config.json \\\r\n  --algo lm \\\r\n  -v \\\r\n  -o run_lm/\n"})}),"\n",(0,i.jsx)(n.p,{children:"Sample output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"XAFS-Optimize: Parameter Optimization\r\n==================================================\r\nLoaded config: UO2_U_L3_feff_config.json\r\nUsing PRJ from config: C:/Users/Admin/Downloads/athena.prj\r\nUsing group: LN300_merge_calib\r\nAlgorithm: LM\r\nOutput directory: run_lm/run_20260226_140801\r\n\r\nStarting optimization...\r\n  Converged in 182 evaluations - R-factor: 0.022038\r\n  Iteration 182: R-factor = 0.022038\r\n\r\nOptimization complete!\r\n  R-factor: 0.022038\r\n  Improvement: 69.70%\r\n  Output: run_lm/run_20260226_140801\\lm_run_1\r\n  Exports: k_space_csv, r_space_csv, parameters_csv, convergence_csv, convergence_plot, fit_plot\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-warm-start-ga",children:"Step 4: Warm-Start GA"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python -m xafs_cli run \\\r\n  --config UO2_U_L3_feff_config.json \\\r\n  --algo ga \\\r\n  --continue-from run_lm/ \\\r\n  --generations 150 \\\r\n  --population 60 \\\r\n  -v \\\r\n  -o run_ga/\n"})}),"\n",(0,i.jsx)(n.p,{children:"Sample output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"XAFS-Optimize: Parameter Optimization\r\n==================================================\r\nLoaded config: UO2_U_L3_feff_config.json\r\nUsing PRJ from config: C:/Users/Admin/Downloads/athena.prj\r\nUsing group: LN300_merge_calib\r\n\r\nContinuing from: run_lm/\r\nWarm Start Summary:\r\n----------------------------------------\r\n  Previous algorithm: lm\r\n  Previous R-factor: 0.022038\r\n  Previous iterations: 182\r\n  Previous timestamp: 2026-02-26T14:08:01.261193\r\n\r\n  Starting Parameters:\r\n    degen_0: 7.782832\r\n    degen_1: 17.575055\r\n    degen_2: 4.335345\r\n    degen_3: 24.000000\r\n    delr_0: -0.024331\r\n    delr_1: 0.047261\r\n    delr_2: -0.000731\r\n    delr_3: 0.200000\r\n    e0: 9.000000\r\n    sigma2_0: 0.009454\r\n    sigma2_1: 0.001000\r\n    sigma2_2: 0.001000\r\n    sigma2_3: 0.001000\r\n  Warm start: e0 = 9.000000\r\n  Warm start: delr_0 = -0.024331\r\n  Warm start: sigma2_0 = 0.009454\r\n  Warm start: degen_0 = 7.782832\r\n  Warm start: delr_1 = 0.047261\r\n  Warm start: sigma2_1 = 0.001000\r\n  Warm start: degen_1 = 17.575055\r\n  Warm start: delr_2 = -0.000731\r\n  Warm start: sigma2_2 = 0.001000\r\n  Warm start: degen_2 = 4.335345\r\n  Warm start: delr_3 = 0.200000\r\n  Warm start: sigma2_3 = 0.001000\r\n  Warm start: degen_3 = 24.000000\r\n  Applied 13 warm start parameter(s)\r\nAlgorithm: GA (generations=150, population=60)\r\nOutput directory: run_ga/run_20260226_141247\r\n\r\n...\r\n\r\n  Iteration 148: R-factor = 0.022038\r\n  Gen 149/150 - R-factor: 0.022038\r\n  Iteration 149: R-factor = 0.022038\r\n  Gen 150/150 - R-factor: 0.022038\r\n  Iteration 150: R-factor = 0.022038\r\n\r\nOptimization complete!\r\n  R-factor: 0.022038\r\n  Improvement: 0.00%\r\n  Output: run_ga/run_20260226_141247\\ga_run_1\r\n  Exports: k_space_csv, r_space_csv, parameters_csv, convergence_csv, convergence_plot, fit_plot\r\n\r\nBest parameters:\r\n  degen_0: 7.782832\r\n  degen_1: 17.575055\r\n  degen_2: 4.335345\r\n  degen_3: 24.000000\r\n  delr_0: -0.024331\r\n  delr_1: 0.047261\r\n  delr_2: -0.000731\r\n  delr_3: 0.200000\r\n  e0: 9.000000\r\n  sigma2_0: 0.009454\r\n  sigma2_1: 0.001000\r\n  sigma2_2: 0.001000\r\n  sigma2_3: 0.001000\n"})}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"Sometimes you just can't get it to converge after a previous fit, and parameters might have to be changed."})}),"\n",(0,i.jsx)(n.h2,{id:"step-5-parallel-ga-ensemble",children:"Step 5: Parallel GA Ensemble"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python -m xafs_cli run \\\r\n  --config UO2_U_L3_feff_config.json \\\r\n  --algo ga \\\r\n  --continue-from run_ga/ \\\r\n  --parallel 6 \\\r\n  --generations 100 \\\r\n  --population 60 \\\r\n  -o run_ensemble/\n"})}),"\n",(0,i.jsx)(n.p,{children:"Sample output:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"XAFS-Optimize: Parameter Optimization\r\n==================================================\r\nLoaded config: UO2_U_L3_feff_config.json\r\nUsing PRJ from config: C:/Users/Admin/Downloads/athena.prj\r\nUsing group: LN300_merge_calib\r\n\r\nContinuing from: run_ga/\r\nAlgorithm: GA (generations=100, population=60)\r\nOutput directory: run_ensemble/run_20260226_141622\r\n\r\nStarting 6 parallel runs...\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Check ",(0,i.jsx)(n.code,{children:"run_ensemble/session_summary.json"})," for the best run:"]}),"\n",(0,i.jsx)(n.h2,{id:"step-6-inspect-results",children:"Step 6: Inspect Results"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"run_ensemble/ga_run_4/\r\n\u251c\u2500\u2500 results.json       \u2190 final parameters and R-factor\r\n\u251c\u2500\u2500 convergence.csv    \u2190 R-factor per generation\r\n\u251c\u2500\u2500 k_space.csv        \u2190 data and fit in k-space\r\n\u251c\u2500\u2500 r_space.csv        \u2190 data and fit in R-space\r\n\u251c\u2500\u2500 fit_plot.png       \u2190 chi(k) + chi(R) overlay figure\r\n\u2514\u2500\u2500 convergence.png    \u2190 R-factor convergence plot\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See ",(0,i.jsx)(n.a,{href:"../reference/output-files",children:"Output Files"})," for a full description of each file."]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},6728(e,n,r){r.d(n,{A:()=>t});const t=r.p+"assets/images/cli_feff-d3452c6668e4fb3592973839e600d965.png"},8453(e,n,r){r.d(n,{R:()=>s,x:()=>o});var t=r(6540);const i={},a=t.createContext(i);function s(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);