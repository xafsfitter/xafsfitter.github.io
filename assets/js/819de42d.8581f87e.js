"use strict";(globalThis.webpackChunkxafsfitter_docs=globalThis.webpackChunkxafsfitter_docs||[]).push([[512],{5974(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"cli/run-command","title":"run Command","description":"The run subcommand executes an XAFS optimization using a JSON configuration file.","source":"@site/docs/cli/run-command.md","sourceDirName":"cli","slug":"/cli/run-command","permalink":"/docs/cli/run-command","draft":false,"unlisted":false,"editUrl":"https://github.com/xafsfitter/xafsfitter.github.io/edit/main/docs/cli/run-command.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"run-command","title":"run Command","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"feff Command","permalink":"/docs/cli/feff-command"},"next":{"title":"Parallel Runs","permalink":"/docs/cli/parallel-runs"}}');var l=r(4848),s=r(8453);const d={id:"run-command",title:"run Command",sidebar_position:3},t="run Command",c={},o=[{value:"Syntax",id:"syntax",level:2},{value:"Required Arguments",id:"required-arguments",level:2},{value:"General Options",id:"general-options",level:2},{value:"Algorithm-Specific Options",id:"algorithm-specific-options",level:2},{value:"Levenberg-Marquardt (<code>--algo lm</code>)",id:"levenberg-marquardt---algo-lm",level:3},{value:"Genetic Algorithm (<code>--algo ga</code>)",id:"genetic-algorithm---algo-ga",level:3},{value:"Particle Swarm (<code>--algo pso</code>)",id:"particle-swarm---algo-pso",level:3},{value:"Bayesian (<code>--algo bayesian</code>)",id:"bayesian---algo-bayesian",level:3},{value:"Override Order",id:"override-order",level:2},{value:"Example: LM \u2192 Warm-Start GA \u2192 Parallel GA Workflow",id:"example-lm--warm-start-ga--parallel-ga-workflow",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsxs)(n.h1,{id:"run-command",children:[(0,l.jsx)(n.code,{children:"run"})," Command"]})}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"run"})," subcommand executes an XAFS optimization using a JSON configuration file."]}),"\n",(0,l.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"python -m xafs_cli run --config <file> [options]\n"})}),"\n",(0,l.jsx)(n.h2,{id:"required-arguments",children:"Required Arguments"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Argument"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--config <file>"})}),(0,l.jsx)(n.td,{children:"Path to the JSON configuration file"})]})})]}),"\n",(0,l.jsx)(n.h2,{id:"general-options",children:"General Options"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Argument"}),(0,l.jsx)(n.th,{children:"Default"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--prj <file>"})}),(0,l.jsx)(n.td,{children:"from config"}),(0,l.jsxs)(n.td,{children:["Athena PRJ file (overrides ",(0,l.jsx)(n.code,{children:"experimental_data.athena_file"})," in config)"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--group <name>"})}),(0,l.jsx)(n.td,{children:"from config"}),(0,l.jsx)(n.td,{children:"Group name within the PRJ file"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--algo <name>"})}),(0,l.jsx)(n.td,{children:"from config"}),(0,l.jsxs)(n.td,{children:["Algorithm: ",(0,l.jsx)(n.code,{children:"lm"}),", ",(0,l.jsx)(n.code,{children:"ga"}),", ",(0,l.jsx)(n.code,{children:"pso"}),", ",(0,l.jsx)(n.code,{children:"bayesian"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--parallel <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"1"})}),(0,l.jsxs)(n.td,{children:["Number of parallel independent runs (see ",(0,l.jsx)(n.a,{href:"./parallel-runs",children:"Parallel Runs"}),")"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--continue-from <dir>"})}),(0,l.jsx)(n.td,{children:"\u2014"}),(0,l.jsx)(n.td,{children:"Directory of a previous run; seeds the optimizer with its best result"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--seed <int>"})}),(0,l.jsx)(n.td,{children:"random"}),(0,l.jsx)(n.td,{children:"Random seed for reproducibility"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-o, --output <dir>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"./xafs_output"})}),(0,l.jsx)(n.td,{children:"Output directory"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"-v, --verbose"})}),(0,l.jsx)(n.td,{children:"off"}),(0,l.jsx)(n.td,{children:"Print detailed progress to stdout"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"algorithm-specific-options",children:"Algorithm-Specific Options"}),"\n",(0,l.jsxs)(n.h3,{id:"levenberg-marquardt---algo-lm",children:["Levenberg-Marquardt (",(0,l.jsx)(n.code,{children:"--algo lm"}),")"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Argument"}),(0,l.jsx)(n.th,{children:"Default"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsx)(n.tbody,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--max-nfev <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"1000"})}),(0,l.jsx)(n.td,{children:"Maximum number of function evaluations"})]})})]}),"\n",(0,l.jsxs)(n.h3,{id:"genetic-algorithm---algo-ga",children:["Genetic Algorithm (",(0,l.jsx)(n.code,{children:"--algo ga"}),")"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Argument"}),(0,l.jsx)(n.th,{children:"Default"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--generations <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"100"})}),(0,l.jsx)(n.td,{children:"Number of generations"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--population <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"50"})}),(0,l.jsx)(n.td,{children:"Population size"})]})]})]}),"\n",(0,l.jsxs)(n.h3,{id:"particle-swarm---algo-pso",children:["Particle Swarm (",(0,l.jsx)(n.code,{children:"--algo pso"}),")"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Argument"}),(0,l.jsx)(n.th,{children:"Default"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--iterations <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"100"})}),(0,l.jsx)(n.td,{children:"Number of iterations"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--particles <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"50"})}),(0,l.jsx)(n.td,{children:"Number of particles"})]})]})]}),"\n",(0,l.jsxs)(n.h3,{id:"bayesian---algo-bayesian",children:["Bayesian (",(0,l.jsx)(n.code,{children:"--algo bayesian"}),")"]}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Argument"}),(0,l.jsx)(n.th,{children:"Default"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--initial-samples <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"10"})}),(0,l.jsx)(n.td,{children:"Number of initial random samples before surrogate model"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--iterations <N>"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"50"})}),(0,l.jsx)(n.td,{children:"Total number of iterations"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"override-order",children:"Override Order"}),"\n",(0,l.jsx)(n.p,{children:"CLI flags always override values in the config file. This makes it easy to reuse a single config file for multiple samples:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Same config, different PRJ files\r\npython -m xafs_cli run --config fit_config.json --prj sample_A.prj\r\npython -m xafs_cli run --config fit_config.json --prj sample_B.prj\r\npython -m xafs_cli run --config fit_config.json --prj sample_C.prj\n"})}),"\n",(0,l.jsx)(n.h2,{id:"example-lm--warm-start-ga--parallel-ga-workflow",children:"Example: LM \u2192 Warm-Start GA \u2192 Parallel GA Workflow"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Step 1: Fast LM fit for initial estimate\r\npython -m xafs_cli run --config config.json --algo lm -o run_lm/\r\n\r\n# Step 2: Warm-start GA from LM result\r\npython -m xafs_cli run --config config.json --algo ga \\\r\n  --continue-from run_lm/ \\\r\n  --generations 200 --population 80 \\\r\n  -o run_ga/\r\n\r\n# Step 3: Parallel GA ensemble for robust result\r\npython -m xafs_cli run --config config.json --algo ga \\\r\n  --continue-from run_ga/ \\\r\n  --parallel 8 \\\r\n  -o run_parallel/\n"})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453(e,n,r){r.d(n,{R:()=>d,x:()=>t});var i=r(6540);const l={},s=i.createContext(l);function d(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);