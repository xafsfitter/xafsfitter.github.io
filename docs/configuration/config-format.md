---
id: config-format
title: Configuration Format
sidebar_position: 1
---

# Configuration Format

XAFS Fitter uses a JSON configuration file that is **fully interchangeable** between the GUI and CLI. A config exported from the GUI's Run History tab can be used directly with `python -m xafs_cli run --config`, and a config generated by the `feff` CLI command can be loaded in the GUI.

## Top-Level Structure

```json
{
  "experimental_data": { ... },
  "fitting_range": { ... },
  "global_params": { ... },
  "paths": [ ... ],
  "optimizer": { ... }
}
```

## `experimental_data`

```json
"experimental_data": {
  "athena_file": "/path/to/data.prj",
  "group": "sample_name"
}
```

| Field | Required | Description |
|-------|----------|-------------|
| `athena_file` | Optional* | Path to the Athena `.prj` file. *Optional if `--prj` is provided on the CLI command line. |
| `group` | Required | Name of the group within the PRJ file |

## `fitting_range`

```json
"fitting_range": {
  "kmin": 3.0,
  "kmax": 12.0,
  "kweight": 2,
  "dk": 1.0,
  "window": "hanning",
  "rmin": 1.0,
  "rmax": 4.5,
  "r_bkg": 1.0
}
```

| Field | Type | Description |
|-------|------|-------------|
| `kmin` | float | Lower k bound for Fourier transform (Å⁻¹) |
| `kmax` | float | Upper k bound (Å⁻¹) |
| `kweight` | int | k-weighting exponent |
| `dk` | float | Window sill width (Å⁻¹) |
| `window` | string | Window function: `"hanning"`, `"kaiser"`, `"parzen"` |
| `rmin` | float | Lower R bound for fitting (Å) |
| `rmax` | float | Upper R bound (Å) |
| `r_bkg` | float | Background subtraction cutoff passed to `autobk` |

## `global_params`

```json
"global_params": {
  "s02": {
    "vary": true,
    "value": 0.9,
    "bounds": [0.7, 1.0],
    "var_name": "s02"
  },
  "e0": {
    "vary": true,
    "value": 0.0,
    "bounds": [-10.0, 10.0],
    "var_name": "e0"
  }
}
```

## `paths`

An array of path objects. Each path references a FEFF `.dat` file and defines parameters for that path.

```json
"paths": [
  {
    "feff_file": "/path/to/feff_output/feff0001.dat",
    "label": "U-O single scattering",
    "include": true,
    "parameters": {
      "s02": {
        "mode": "computed",
        "expression": "s02"
      },
      "e0": {
        "mode": "computed",
        "expression": "e0"
      },
      "deltar": {
        "mode": "free",
        "vary": true,
        "value": 0.0,
        "bounds": [-0.5, 0.5],
        "var_name": "dr_uo"
      },
      "sigma2": {
        "mode": "free",
        "vary": true,
        "value": 0.003,
        "bounds": [0.0, 0.02],
        "var_name": "sig2_uo"
      },
      "degen": {
        "mode": "free",
        "vary": true,
        "value": 8.0,
        "bounds": [1.0, 12.0],
        "var_name": "cn_1"
      }
    }
  }
]
```

## `optimizer`

```json
"optimizer": {
  "algorithm": "ga",
  "generations": 100,
  "population": 50
}
```

Supported algorithm values: `"lm"`, `"ga"`, `"pso"`, `"bayesian"`.

## Complete Example

```json
{
  "experimental_data": {
    "athena_file": "UO2_data.prj",
    "group": "uo2_rt"
  },
  "fitting_range": {
    "kmin": 3.0,
    "kmax": 12.0,
    "kweight": 2,
    "dk": 1.0,
    "window": "hanning",
    "rmin": 1.0,
    "rmax": 4.5,
    "r_bkg": 1.0
  },
  "global_params": {
    "s02": {
      "vary": true,
      "value": 0.9,
      "bounds": [0.7, 1.0],
      "var_name": "s02"
    },
    "e0": {
      "vary": true,
      "value": 0.0,
      "bounds": [-10.0, 10.0],
      "var_name": "e0"
    }
  },
  "paths": [
    {
      "feff_file": "feff_uo2/feff0001.dat",
      "label": "U-O",
      "include": true,
      "parameters": {
        "s02": { "mode": "computed", "expression": "s02" },
        "e0":  { "mode": "computed", "expression": "e0" },
        "deltar": {
          "mode": "free", "vary": true,
          "value": 0.0, "bounds": [-0.5, 0.5], "var_name": "dr_uo"
        },
        "sigma2": {
          "mode": "free", "vary": true,
          "value": 0.003, "bounds": [0.0, 0.02], "var_name": "sig2_uo"
        },
        "degen": {
          "mode": "free", "vary": true,
          "value": 8.0, "bounds": [1.0, 12.0], "var_name": "cn_1"
        }
      }
    }
  ],
  "optimizer": {
    "algorithm": "lm",
    "max_nfev": 1000
  }
}
```
